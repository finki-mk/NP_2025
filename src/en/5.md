<img src="../img/logo_mk.png">

# Advanced Programming
## Auditory Exercise 5 (Exercises, introducing maps)

#### 1. Healthy meals
Define a class **HealthyMeals** for analyzing people's nutrition based on a list of healthy meals.  
The system should allow analysis of how many healthy meals each person consumes.

Implement the method:
- `public void evaluate(InputStream is, OutputStream os)`
    - reads data in this format:
        - healthyMeal1 healthyMeal2 healthyMeal3 ...
        - PERSON_ID meal1 meal2 meal3 ...
        - PERSON_ID meal1 meal2 ...
    - The first line contains all healthy meals.  
      Each following line contains data for one person: their ID and the names of the meals they consumed.  
      For each person, calculate how many of the entered meals are healthy, i.e., how many appear in the list of healthy meals.  
      The result is printed to the output stream, where all persons are sorted in descending order by the number of healthy meals,  
      and if the count is the same — ascending by PERSON_ID.

- Example input:
    - salad apple yogurt
    - 101 salad pizza salad soup
    - 102 apple yogurt coffee
    - 103 burger fries

- Example output:
    - Person ID: 101 (healthy meals: 1)
    - Person ID: 102 (healthy meals: 2)
    - Person ID: 103 (healthy meals: 0)

**Solution**
- https://github.com/atodorovska/np-code-2025/tree/main/src/class5/healthy_meals

---

#### 2. Airports
Implement a class **Airports** for managing information about airports and flights.

---

**`public void addAirport(String name, String country, String code, int passengers)`**  
Adds a new airport (name, country, code, and number of passengers per year).  
Airports should be stored in a map `Map<String, Airport>` where the key is the airport code.

**`public void addFlight(String from, String to, int time, int duration)`**  
Adds a new flight from the airport with code `from` to the airport with code `to`.  
Flights should be stored in a map `Map<String, List<Flight>> flightsFrom`, where the key is the departure airport code.  
Use `computeIfAbsent(...).add(...)` when adding.  
There can be multiple flights between the same airports.

**`public void showFlightsFromAirport(String code)`**  
Prints all flights departing from the airport with code `code`.  
First, print the airport name, then all flights sorted first lexicographically by destination code,  
and then by departure time (without using `sort()`).

**`public void showDirectFlightsFromTo(String from, String to)`**  
Prints all direct flights from the airport `from` to `to`, sorted by departure time.

**`public void showDirectFlightsTo(String to)`**  
Prints all direct flights to the airport with code `to`, sorted by departure time.

---

- All flights should be stored and organized without using built-in sorting methods.  
  Instead, they must be inserted in the correct position upon addition.
- Printing should follow a clear format, as in the test examples.

**Solution**
- https://github.com/atodorovska/np-code-2025/tree/main/src/class5/airports

---

#### 3. Payroll System
Implement an application for tracking employees' work engagement in an IT company.  
Define a class **PayrollSystem** that stores information about employees.  
There are two types of employees: **HourlyEmployee** and **FreelanceEmployee**.

- **HourlyEmployee** are paid based on total hours worked.
- **FreelanceEmployee** are paid based on ticket points solved.

---

**`PayrollSystem(Map<String, Double> hourlyRateByLevel, Map<String, Double> ticketRateByLevel)`**  
Constructor with two arguments — maps.
- The first map defines the hourly rate per level for hourly employees.
- The second map defines the rate per ticket point per level for freelance employees.

**`void readEmployeesData(InputStream is)`**  
Reads employee data.  
Each employee's data is in a new line in the following format:
- For HourlyEmployee: `H;ID;level;hours;`
- For FreelanceEmployee: `F;ID;level;ticketPoints1;ticketPoints2;...;ticketPointsN;`

**`Map<String, Collection<Employee>> printEmployeesByLevels(OutputStream os, Set<String> levels)`**  
Prints and returns a map of employees grouped by their level (from the provided `levels` set).  
Employees should be sorted by salary in descending order within each level.  
If salaries are equal, they should be compared by level.

**`Map<String, Double> totalPayPerEmployee()`**  
Returns a map where the key is the employee ID, and the value is the total salary amount.  
(Use `merge` or `computeIfAbsent` for summing.)

---

- Salary calculation:
    - For HourlyEmployee: all hours up to 40 are multiplied by the base hourly rate,  
      and all hours above 40 are multiplied by the rate × 1.5.
    - For FreelanceEmployee: total points × rate per point for their level.

**Solution**
- https://github.com/atodorovska/np-code-2025/tree/main/src/class5/payroll_system

---

#### 4. Add an additional Map method to the Car task from the previous exercise

**Solution**
- https://github.com/atodorovska/np-code-2025/tree/main/src/class5/car_map

---

#### 5. Working with dates and times

**Solution**
- https://github.com/atodorovska/np-code-2025/tree/main/src/class5/dates_and_times

---

#### 6. Another generic example

Implement a system for managing media content licenses (music, video, photos, etc.)  
that generate monthly royalty income.

---

Define an interface `Quantifiable` with one method:
- `double amount()` — returns the monetary value (the monthly income).

---

Define a class `License` representing the licenses owned by the company.  
The class should contain the following fields:

- `String title` – content title
- `String category` – category (e.g., "music", "video", "photo")
- `String region` – region (e.g., "EU", "US", "APAC")
- `int units` – number of monthly uses/streams/views
- `double ratePerUnit` – income per unit

- The constructor should initialize all fields and prevent negative values for `units` and `ratePerUnit`, as well as null or empty strings.
- The class should implement the `Quantifiable` interface.
- Implement `Comparable<License>` so that:
    - Licenses are compared by total income (`amount()`), **in descending order**.
    - If equal, compare by `category` (alphabetically).
    - If still equal, compare by `title`.
- The `amount()` method should return `units * ratePerUnit`.
- The `toString()` method should return text in the format:  
  `"Title [category|region] units=X rp=Y total=Z"`

---

Define a class `Ledger` that stores a list of objects of any type `T` that implements both `Quantifiable` and `Comparable`.

The class should contain the following methods:

1. **No-argument constructor**

2. **`void put(T item)`** – adds a new item to the collection (must not be `null`).

3. **`Set<....> project(Function<....., ......> mapper)`** –  
   returns a set of unique values obtained by applying the provided function.

4. **`void forEachIf(Predicate<.....> condition, Consumer<.....> action)`** –  
   executes an action `action` for all elements satisfying the condition `condition`.

5. **`double sum()`** – returns the total sum of all values (`amount()`) in the collection.

6. **`int compareTo(Ledger<....> other)`** – compares two ledgers by their total value (`sum()`),  
   in **descending order** (higher total = greater).

---

**Solution**
- https://github.com/atodorovska/np-code-2025/tree/main/src/class5/generic
